(this.webpackJsonpbombsniffer=this.webpackJsonpbombsniffer||[]).push([[0],{19:function(e,t,n){e.exports=n(35)},24:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(12),c=n.n(a),i=(n(24),n(5)),u=n(3),l=n(10);var s=Object(o.createContext)(),d=Object(o.createContext)(),f=n(14),m=n(15),b=n(17),v=n(16),h=n(18),p=function(e){function t(){var e,n;Object(f.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).shouldShortPress=!0,n.moved=!1,n.state={touch:!0},n.startTimeout=function(){n.timeout=setTimeout(n.longPressed,n.props.time)},n.longPressed=function(){n.shouldShortPress=!1,n.props.onLongPress&&!1===n.moved&&n.props.onLongPress()},n.cancelTimeout=function(){clearTimeout(n.timeout)},n.onTouchStart=function(e){n.shouldShortPress=!0,n.moved=!1,n.startTimeout(),"function"===typeof n.props.onTouchStart&&n.props.onTouchStart(e)},n.onTouchEnd=function(e){n.cancelTimeout(),n.props.onPress&&n.shouldShortPress&&!1===n.moved&&n.props.onPress(),"function"===typeof n.props.onTouchEnd&&n.props.onTouchEnd(e)},n.onTouchCancel=function(e){n.cancelTimeout(),"function"===typeof n.props.onTouchCancel&&n.props.onTouchCancel(e)},n.onMove=function(e){n.moved=!0,"function"===typeof n.props.onTouchMove&&n.props.onTouchMove(e)},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){try{document.createEvent("TouchEvent")}catch(e){this.setState({touch:!1})}}},{key:"componentWillUnmount",value:function(){this.cancelTimeout()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.disabled;if(!this.state.touch||n)return t;var o={onContextMenu:function(e){return e.preventDefault()},onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onTouchMove:this.onMove,onTouchCancel:this.onTouchCancel,style:Object(u.a)({},t.props.style,{WebkitUserSelect:"none",WebkitTouchCallout:"none"})};return r.a.cloneElement(t,Object(u.a)({},t.props,{},o))}}]),t}(o.Component);p.defaultProps={time:500};var g=p,w=n(6),y=n(4),j=n(2);n(31);function T(e){var t=e.adjacentBombCount,n=e.bombed,a=e.flagged,c=e.location,i=e.revealed,u=Object(o.useContext)(d),l=Object(o.useContext)(s),f=function(){a||u||l({type:"select",location:c,time:Date.now()})},m=function(e){e&&e.preventDefault(),i||u||l({type:"toggleFlagged",location:c,time:Date.now()})},b=["cell",a&&"flagged",i&&"revealed",u&&n&&"bombed"].filter(Boolean).join(" "),v=n&&(i||u)&&!a,h=a?r.a.createElement(w.a,{icon:"flag"}):v?r.a.createElement(w.a,{icon:"bomb"}):i&&t>0?t:null;return r.a.createElement(g,{time:500,onLongPress:m,onPress:f},r.a.createElement("span",{className:b,onClick:f,onContextMenu:m,"data-adjacent-bomb-count":i?t:null},h))}y.b.add(j.a,j.c);n(32);function C(e){var t=e.rows.map((function(e,t){return r.a.createElement(E,{cells:e,key:t})})),n=["board",Object(o.useContext)(d)&&"game-done"].filter(Boolean).join(" ");return r.a.createElement("div",{className:n},t)}function E(e){var t=e.cells.map((function(e){return r.a.createElement(T,Object.assign({},e,{key:e.location}))}));return r.a.createElement("span",{className:"row"},t)}n(33);y.b.add(j.b,j.d,j.e,j.f);var O={win:j.e,lose:j.b,false:j.f},S=function(e){var t=Object(o.useContext)(s),n=Object(o.useCallback)((function(){return t({type:"newGame"})}),[t]),a=Object(o.useContext)(d),c=O[a],i=function(e){return e>=0?(e%1e3).toString(10).padStart(3,"0"):"-"+(-e%1e3).toString(10).padStart(2,"0")};return r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"bombs-remaining numbers"},i(e.bombsRemaining)),r.a.createElement("button",{className:"new-game",onClick:n},r.a.createElement(w.a,{icon:c})),r.a.createElement("div",{className:"elapsed-seconds numbers"},i(e.elapsedSeconds))))},k=n(9);function P(e){var t=e.width,n=e.height,o=e.bombCount;return{new:!0,rows:Object(k.a)(Array(n)).map((function(e,n){return Object(k.a)(Array(t)).map((function(e,t){return{bombed:!1,flagged:!1,revealed:!1,location:[n,t],adjacentBombCount:0,adjacentFlagCount:0}}))})),bombCount:o,height:n,width:t}}function x(e){var t=e.rows.map((function(e){return e.map((function(e){return Object(u.a)({},e)}))}));return Object(u.a)({},e,{rows:t})}function M(e,t){e.new&&function(e,t){e.new=!1;var n=e.rows,o=e.bombCount,r=e.width,a=e.height,c=Object(i.a)(t,2),u=c[0],l=c[1],s=0;for(;s<o;){var d=Math.floor(a*Math.random()),f=Math.floor(r*Math.random());u-1<=d&&d<=u+1&&l-1<=f&&f<=l+1||n[d][f].bombed||(n[d][f].bombed=!0,s++)}for(var m=function(t){for(var n=function(n){e.rows[t][n].adjacentBombCount=0,L(e,[t,n],(function(o){return o.bombed&&e.rows[t][n].adjacentBombCount++}))},o=0;o<e.width;o++)n(o)},b=0;b<e.height;b++)m(b)}(e,t);var n=F(e,t);return n.flagged||B(e)?e:(n.revealed?n.adjacentBombCount===n.adjacentFlagCount&&function(e,t){if(L(e,t,(function(e){e.flagged||(e.revealed=!0)})),B(e))return;L(e,t,(function(t){t.flagged||0!==t.adjacentBombCount||W(e,t.location)}))}(e,t):(n.revealed=!0,n.bombed||W(e,t)),e)}function B(e){return A(e)?"lose":!!function(e){if(A(e))return!1;var t=N(e),n=t.flagged===t.bombed,o=t.cells===t.flagged+t.revealed;return n&&o}(e)&&"win"}function A(e){var t=!0,n=!1,o=void 0;try{for(var r,a=e.rows[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var c=r.value,i=!0,u=!1,l=void 0;try{for(var s,d=c[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var f=s.value;if(f.revealed&&f.bombed)return!0}}catch(m){u=!0,l=m}finally{try{i||null==d.return||d.return()}finally{if(u)throw l}}}}catch(m){n=!0,o=m}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}return!1}function N(e){var t={bombed:0,flagged:0,revealed:0},n=!0,o=!1,r=void 0;try{for(var a,c=e.rows[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var i=a.value,u=!0,l=!1,s=void 0;try{for(var d,f=i[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var m=d.value;for(var b in t)m[b]&&t[b]++}}catch(v){l=!0,s=v}finally{try{u||null==f.return||f.return()}finally{if(l)throw s}}}}catch(v){o=!0,r=v}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return t.cells=e.width*e.height,t}function F(e,t){var n=Object(i.a)(t,2),o=n[0],r=n[1];return e.rows[o][r]}var D=new Set;function W(e,t){return function t(n){var o=F(e,n);if(D.has(o))return;D.add(o);o.revealed=!0,0===o.adjacentBombCount&&L(e,n,(function(e){e.flagged||t(e.location)}))}(t),D.clear(),e}function L(e,t,n){for(var o=Object(i.a)(t,2),r=o[0],a=o[1],c=a-1;c<=a+1;c++)for(var u=r-1;u<=r+1;u++){0<=c&&c<e.width&&0<=u&&u<e.height&&(c!==a||u!==r)&&n(e.rows[u][c],[u,c],e)}}n(34);var U={width:9,height:9,bombCount:10};function q(){return{board:P(U),startTime:null,endTime:null}}function G(e,t){switch(t.type){case"select":var n=M(x(e.board),t.location),o=e.startTime?e.startTime:t.time,r=e.endTime||!B(n)?e.endTime:t.time;return Object(u.a)({},e,{board:n,startTime:o,endTime:r});case"toggleFlagged":var a=function(e,t){var n=F(e,t);return B(e)||n.revealed?e:(n.flagged=!n.flagged,L(e,t,(function(e){return e.adjacentFlagCount+=n.flagged?1:-1})),e)}(x(e.board),t.location),c=e.endTime||!B(a)?e.endTime:t.time;return Object(u.a)({},e,{board:a,endTime:c});case"newGame":return q();default:throw Error("Unknown action type")}}var J=function(){var e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.b.apply(void 0,t.concat([function(e){return e},"App"]))}(G,q()),t=Object(i.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(o.useState)(Date.now()),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){var e=requestAnimationFrame((function t(){e=requestAnimationFrame(t),r(Date.now())}));return function(){return e&&cancelAnimationFrame(e)}}),[]),n}(),u=n.startTime?Math.floor(((n.endTime||c)-n.startTime)/1e3):0,f=U.bombCount-N(n.board).flagged;return c&&r.a.createElement(s.Provider,{value:a},r.a.createElement(d.Provider,{value:B(n.board)},r.a.createElement("div",{className:"bombsniffer"},r.a.createElement(S,{elapsedSeconds:u,bombsRemaining:f}),r.a.createElement(C,{rows:n.board.rows}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(e){return r.a.createElement(l.a,{name:"App"},e.children)}),null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.ac9f6576.chunk.js.map